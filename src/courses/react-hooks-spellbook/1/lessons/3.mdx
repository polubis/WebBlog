---
name: Manage components appearance with useToggle hook
description: We'll dive into use cases of custom useToggle hook. We'll implement it, write types and add tests. We'll show the code before and after the implementation of useToggle.
duration: 4
---

<Prelude label="Let's understand why you may need the useToggle hook">
  <M>
    Usually when creating components like: <B>Dialogs</B>, <B>Menus</B>,{" "}
    <B>Modals</B>, and <B>Alerts</B>, you need a flag that determines whether
    should something be displayed or not. With this flag, you need to provide 3
    functions: <B>open</B>, <B>close</B>, and <B>toggle</B>. It will probably
    looks like the following code:{" "}
  </M>
  <Code
    mode="dynamic"
    linesCount={15}
    lang="tsx"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/1.tsx"
  />
  <M>
    Imagine that you have tons of components like mentioned one and in addition
    in your application logic, you need to determine whether to show something
    or hide.{" "}
  </M>
  <Code
    mode="dynamic"
    linesCount={13}
    lang="tsx"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/2.tsx"
  />
  <M>
    The next case may require assigning some data when you want to display UI
    parts - for example, you want to edit user data, so you need to store
    somewhere the current user object, update this object, close the form, and
    reset the object to <B>initial value</B> or just <B>null</B>.
  </M>
  <Code
    mode="dynamic"
    linesCount={23}
    lang="tsx"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/3.tsx"
  />
  <M>
    This code is easy to understand but hard to maintain - the same repetitive
    logic, hard coded in different places. You need to write repeated tests to
    cover these cases for every component that needs to show/hide UI or for
    components that store some data during toggling.
  </M>
  <M>
    This is the moment when lights turn on and we're kicking in with easy to use
    and type-safe hook. This hook will be called <B>useToggle</B> - it was
    really hard for me to find the appropriate name for this hook.{" "}
  </M>
</Prelude>

<Section>
  <XL>How we will use the useToggle hook?</XL>
  <M>
    We want to make this hook "flat" as possible to reduce the number of lines.
    So it will be used in the following way:{" "}
  </M>
  <Code description="Have we used a vacuum cleaner?" mode="dynamic" linesCount={12} lang="tsx" src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/4.tsx"/>

  <M>
    It's insane how we reduced the code from the previous example. Let's explore
    the full API of this hook:{" "}
  </M>
  <Code mode="dynamic" linesCount={29} lang="ts" src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/5.tsx"/>
</Section>

<Section>
  <XL>Creating type definitions in TypeScript</XL>
  <M>
    Contracts in terms of <B>type-safety</B> are required to achieve protection
    from typos, invalid usage of functions, and invalid usage of returned data.
    Let's create them in separate file:
  </M>
  <Code
    mode="dynamic"
    linesCount={24}
    lang="ts"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/6.tsx"
  />
  <M>
    We've used generics <B>T</B> and we assigned the initial type to <B>null</B>
    . It means if we skip providing the generic type to hook, the default data
    type will be <B>null</B>.
  </M>
</Section>

<Section>
  <XL>Implementation process of the useToggle hook</XL>
  <M>
    Now it's time for implementation. With before-created type definitions,
    we'll be safe during implementation. <B>Look</B> at the following <B>gif</B>{" "}
    to understand the order and implementation process with defined contracts.
  </M>
  <Image
    rolled src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/1.gif" />
  <M>
    Ok, we know how it was implemented so let's explain each part of this
    implementation.
  </M>
  <Code
    mode="dynamic"
    linesCount={46}
    lang="ts"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/7.tsx"
  />
  <M>Now is the time for unit tests!</M>
</Section>

<Section>
  <XL>Unit tests for useToggle hook</XL>
  <M>
    We'll use the <B>react-testing-library</B> module that allows us to test
    hooks. We'll try to go through the typical use case of this hook and we'll
    check if the state changed correctly.
  </M>
  <Code
    mode="dynamic"
    linesCount={53}
    lang="ts"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/snippets/8.tsx"
  />
  <M>
    We started by assigning the initial state to our hook via configuration and
    then we closed, opened, toggled, and reassigned data. After each
    interaction, we checked the state.{" "}
  </M>
</Section>

<Example label="Final result">
  <M>
    <A
      href="https://github.com/polubis/Dream-stack-for-React-dev/tree/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle"
      outside
    >
      Repository
    </A>{" "}
    to play with implemented code. In addition below you have all the required
    code Copy and paste it and just use <B>useToggle</B> hook.
  </M>
  <M>Look at type definitions file. </M>
  <Code
    description="defs.ts"
    rolled
    linesCount={21}
    mode="dynamic"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/defs.ts"
    lang="ts"
  />
  <M>Now the implementation kicks in. </M>
  <Code
    description="use-toggle.ts"
    rolled
    linesCount={29}
    mode="dynamic"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/use-toggle.ts"
    lang="ts"
  />
  <M>In the end the really important part - tests.</M>
  <Code
    description="use-toggle.test.ts"
    rolled
    linesCount={74}
    mode="dynamic"
    src="https://raw.githubusercontent.com/polubis/Dream-stack-for-React-dev/article/Manage-components-appearance-with-useToggle-hook/system/libs/figa-hooks/src/lib/use-toggle/use-toggle.test.ts"
    lang="ts"
  />
</Example>

<Summary label="What did we learn in this lesson?">
  <M>
    As you have probably seen, sometimes simple logic can be frustrating to work
    with if you need to repeat such logic in different places. This simple{" "}
    <B>useToggle</B> hook shows how you can wrap such logic inside a reusable,
    independent being.{" "}
  </M>
  <M>
    What scenarios can be handled with this utility? It may be useful in
    creating any components like <B>Modal</B>, <B>Menu</B>, in simple words - to
    create something that appears and disappears.
  </M>
  <M>
    In addition, we can assign additional data that may be useful when dealing
    with real business requirements or more complex components.
  </M>
  <M>
    Everything is tested in a single place, so next time when you'll test your
    components you need to focus only on checking - is the <B>useToggle</B> hook
    used? If yes, you can skip testing these flags and data setup in your
    application/presentation-related components.
  </M>
</Summary>
