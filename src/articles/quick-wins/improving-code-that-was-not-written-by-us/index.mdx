---
cdate: 2022-05-03
mdate: 2022-07-02
authorId: polubis
treviewerId: kwozniak
lang: en
lreviewerId: kreszko
stack: typescript,react,jest
tags: patterns,code improvements
description: How to unify code written by programmers? How to add additional methods? How to hide what is not needed and how to simply make your life easier with facade pattern.
readTime: 5
seniorityLevel: intermediate
title: Improving code that was not written by us
---

<Prelude>
  <M>
    During a project you will most likely cooperate with other developers. Each
    of them has a slightly different writing style. In addition, you might
    encounter situations where the code is duplicated or specific methods are
    missing.
  </M>
  <M>
    What if you had something to unify the API, add the missing methods and
    force developers to write consistent code?
  </M>
  <Hint hasBg>
    We will implement the List class using the facade pattern to create code
    which solves above problems.
  </Hint>
</Prelude>

<Section>
  <XL>1. API design</XL>
  <M>
    We want our List class to have additional functionality - tracking a
    specific list item and reading this item at any time. Plus, we need a method
    that will allow us to replace a specific element.
  </M>
  <M>
    In addition, we need a method that will allow us to replace a specific
    element.
  </M>
  <Snippet
    linesCount={16}
    description="Several types for understanding implementation"
    src="https://raw.githubusercontent.com/polubis/Creating-list-abstraction-for-arrays/main/src/snippets/1_API_design.ts"
  />
</Section>

<Section>
  <XL>2. Mock implementation</XL>
  <M>
    Letâ€™s create class which implements previously created interface. In TDD,
    throwing exceptions is a standard practice to indicate that they are not yet
    implemented.
  </M>
  <Snippet
    description="Fake implementation for TypeScript peace of mind :)"
    linesCount={23}
    src="https://raw.githubusercontent.com/polubis/Creating-list-abstraction-for-arrays/main/src/snippets/2_Mock_implementation.ts"
  />
</Section>

<Section>
  <XL>3. Creation of test scenarios</XL>
  <M>
    Before starting the implementation, think about exactly how your methods
    should behave. Weâ€™re going write our test scenario. Thanks to this approach
    it is possible to locate more edge cases in the code.
  </M>
  <Snippet
    description="Almost like a screenwriter"
    linesCount={29}
    src="https://raw.githubusercontent.com/polubis/Creating-list-abstraction-for-arrays/main/src/snippets/3_Creation_of_test_scenarios.ts"
  />
</Section>

<Section>
  <XL>4. Implementing tests</XL>
  <M>
    Time for tests implementation. After this step, all tests are read. We
    created some helper functions and test user data which you can check inside
    mocks directory.
  </M>
  <Snippet
    description="Several tests written in jest"
    linesCount={58}
    src="https://raw.githubusercontent.com/polubis/Creating-list-abstraction-for-arrays/main/src/snippets/4_Implementing_tests.ts"
  />
</Section>

<Section>
  <XL>5. Making tests green</XL>
  <M>
    Having the correct implementation, we can go to refactor later. In this
    article we skip this step.
  </M>
  <M>
    In the constructor, we assign initial values â€‹â€‹and set the pointer. Then we
    implement specific methods that will move the pointer and return a new
    instance of the List. Additionally, we add a method to replace an element
    with an identifier or a pointer / index.
  </M>
  <Snippet
    description="Green is a nice color"
    linesCount={45}
    src="https://raw.githubusercontent.com/polubis/Creating-list-abstraction-for-arrays/main/src/snippets/5_Making_tests_green.ts"
  />
</Section>

<Section>
  <XL>6. Usage in React</XL>
  <M>
    No spread operators, no anonymous functions for data management, 100%
    immutability, separation of concerns, encapsulation and readable /
    consistent code as benefits of facade pattern.
  </M>
  <Snippet
    description="Fancy usage in React"
    linesCount={36}
    src="https://raw.githubusercontent.com/polubis/Creating-list-abstraction-for-arrays/main/src/snippets/6_Usage_in_React.tsx"
  />
</Section>

<Demo label="Full example" height="500px">
  <iframe
    src="https://codesandbox.io/embed/improving-code-that-was-not-written-by-us-lewmz0?fontsize=14&hidenavigation=1&theme=dark"
    style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
    title="Improving code that was not written by us"
    allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
    sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
  ></iframe>
</Demo>

<Summary>
  <M>I hope you enjoyed this quick win ðŸ™‚.</M>
  <M>
    Of course this is simple example but as you see sky is the limit and you can
    create your own facade for everything in your application.
  </M>
  <M>
    Feel free to contact me if you have any questions/proposals. Have a nice day
    and good health!
  </M>
</Summary>
