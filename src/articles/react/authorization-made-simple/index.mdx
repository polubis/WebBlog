---
cdate: 2023-03-23
mdate: 2023-03-23
authorId: kwozniak
treviewerId: polubis
lreviewerId: kreszko
stack: typescript,react
tags: hooks,authorization
description: Short and simple on the topic of authorization in React, so as not to get hung up on it.
readTime: 4
title: Authorization made simple
graphicauthor: https://unsplash.com/@pawel_czerwinski/
---

<Prelude>
  <M>
    <B>Authentication</B> is one of the more common functionalities when it
    comes to web applications. Checking whether a user is currently logged in
    generates a lot of code, which in most cases is not very different. Using
    this problem as an example, we will show how to write a simple hook for
    authentication, which will be the only source of truth ğŸ“– and will be used
    to build reusable components ğŸ§©.
  </M>
</Prelude>

<Section>
  <XL>1. Service</XL>
  <M>
    To fully illustrate the problem, we will use the prepared login ğŸ”‘ mockup.
    The following function waits 3s and then simulates a BE query that returns a
    flag.
  </M>
  <Snippet
    description="Login endpoint mock"
    linesCount={20}
    src="/snippets/authorization-made-simple/service.ts"
  />
</Section>

<Section>
  <XL>2. Provider</XL>
  <M>
    So we create a <B>provider</B> that will hold information via the{" "}
    <B>context</B> whether the user is already correctly authorized. The
    function starts by asking BE about the login. The result is stored in the
    state.
  </M>
  <Snippet
    description="Provider and context hook"
    linesCount={54}
    src="/snippets/authorization-made-simple/provider.tsx"
  />
</Section>

<Section>
  <XL>3. Guards</XL>
  <M>
    As we mentioned our custom hook will be used to implement <B>reusable</B>{" "}
    components. We will now write two guards ğŸ’‚â€â™‚ï¸ that, depending on the flag
    stored in the provider, will render (or not) part of the layout.
  </M>
  <Snippet
    description="Guards"
    linesCount={46}
    src="/snippets/authorization-made-simple/guard.tsx"
  />
</Section>

<Section>
  <XL>4. Usage</XL>
  <M>
    It's time for a use case example. We will use the default layout rendered
    with <B>create-react-app</B>.
  </M>
  <Snippet
    description="Guards"
    linesCount={25}
    src="/snippets/authorization-made-simple/usage.tsx"
  />
  <M>
    As you can see, hiding or showing parts of the layout is trivial ğŸ¤¡ from now
    on and reusable anywhere in the application. Of course, let's not forget
    that we need to use our provider in the parent component ğŸ˜‰.
  </M>
</Section>
