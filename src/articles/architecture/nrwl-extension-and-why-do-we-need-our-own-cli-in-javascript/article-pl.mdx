---
cdate: 2023-11-14
mdate: 2023-11-14
authorId: ejuchnikowski
treviewerId: polubis
lreviewerId: polubis
goal: Celem tego poradnika jest dostarczenie kompleksowego zrozumienia procesu tworzenia niestandardowego interfejsu wiersza poleceÅ„ (CLI) oraz udzielenie wskazÃ³wek dotyczÄ…cych publikacji utworzonego narzÄ™dzia w rejestrze NPM.
purpose: inform
keywords: CLI,NX i CLI,NX generatory,Tworzenie biblioteki,Publikacja biblioteki na NPM
tags: cli,nx,architecture
langs: ["en"]
lang: pl
stack: javascript,typescript,nx
description: Zbadaj rozszerzenie NRWL potÄ™Å¼ne narzÄ™dzie do zoptymalizowanego rozwoju. Dowiedz siÄ™, dlaczego niestandardowy interfejs wiersza poleceÅ„ (CLI) w jÄ™zyku JavaScript zwiÄ™ksza kontrolÄ™ i skalowalnoÅ›Ä‡ projektu.
readTime: 9
seniorityLevel: expert
title: NRWL i dlaczego potrzebujemy wÅ‚asnego CLI w JavaScript
---

<Prelude>
  <M>
    ProgramiÅ›ci powszechnie zdobywajÄ… umiejÄ™tnoÅ›ci obsÅ‚ugi interfejsu wiersza
    poleceÅ„ (<B>CLI</B>) w rÃ³Å¼nych technologiach. Interfejsy wiersza poleceÅ„ sÄ…
    integralnÄ… czÄ™Å›ciÄ… stosu technologicznego, automatyzujÄ… zadania takie jak
    generowanie kodu, budowanie i zarzÄ…dzanie zaleÅ¼noÅ›ciami. ChociaÅ¼ czÄ™sto
    zwiÄ…zane z konkretnymi technologiami, interfejsy wiersza poleceÅ„ mogÄ… peÅ‚niÄ‡
    szersze funkcje w zespole lub projekcie, usprawniajÄ…c procesy{" "}
    <B>Continuous Integration</B>. Niniejszy artykuÅ‚ analizuje zalety tego
    podejÅ›cia.
  </M>
</Prelude>

<Section>
  <XL>Dlaczego wÅ‚asny CLI?</XL>
  <M>
    Jak wspomniano wczeÅ›niej, interfejsy wiersza poleceÅ„ (<B>CLIs</B>)
    automatyzujÄ… pracÄ™ z konkretnymi technologiami, wykonujÄ…c zadania z poziomu
    konsoli. Podczas rozwoju, zadania wykraczajÄ… poza te zwiÄ…zane z konkretnÄ…
    technologiÄ…, obejmujÄ…c aspekty dotyczÄ…ce caÅ‚ej organizacji, zespoÅ‚u oraz
    projektu. GÅ‚Ã³wne korzyÅ›ci z tworzenia niestandardowego interfejsu wiersza
    poleceÅ„ (<B>custom CLI</B>) w ramach organizacji lub projektu obejmujÄ…:
  </M>
  <M>
    â›½ <B>ZwiÄ™kszenie EfektywnoÅ›ci</B>: Interfejs wiersza poleceÅ„ umoÅ¼liwia
    skrÃ³cenie czasu wykonania zadaÅ„ poprzez pojedyncze polecenia lub skrypty,
    przyspieszajÄ…c pracÄ™. Jego potÄ™ga tkwi w szybkim i Å‚atwym obsÅ‚ugiwaniu
    powtarzalnych zadaÅ„, co przekÅ‚ada siÄ™ na znaczne oszczÄ™dnoÅ›ci czasu.
  </M>
  <M>
    <B>ğŸ¡ ReprodukowalnoÅ›Ä‡</B>: Interfejs wiersza poleceÅ„ zapewnia precyzyjne
    odtwarzanie procesu, eliminujÄ…c rÄ™czne wykonywanie poszczegÃ³lnych krokÃ³w.
    Skonsolidowany skrypt zawiera wszystkie kroki, umoÅ¼liwiajÄ…c Å‚atwe i spÃ³jne
    ponowne uruchamianie tego samego ciÄ…gu dziaÅ‚aÅ„.
  </M>
  <M>
    <B>ğŸ”€ UdostÄ™pnianie</B>: Interfejs wiersza poleceÅ„ wspiera wspÃ³Å‚pracÄ™,
    umoÅ¼liwiajÄ…c Å‚atwe udostÄ™pnianie z innymi czÅ‚onkami zespoÅ‚u. Zapewnienie
    jednolitego dostÄ™pu do narzÄ™dzi i procedur poprawia spÃ³jnoÅ›Ä‡ pracy
    zespoÅ‚owej, zmniejszajÄ…c bÅ‚Ä™dy wynikajÄ…ce z rozbieÅ¼noÅ›ci w narzÄ™dziach.
  </M>
  <M>
    <B>ğŸ—ï¸ Automatyzacja</B>: Interfejs wiersza poleceÅ„ uÅ‚atwia automatyzacjÄ™
    rÃ³Å¼norodnych zadaÅ„, przyspieszajÄ…c proces tworzenia oprogramowania. Jest
    niezbÄ™dny przy czynnoÅ›ciach takich jak budowanie, testowanie i wdraÅ¼anie
    aplikacji.
  </M>
  <M>
    <B>ğŸš SkalowalnoÅ›Ä‡</B>: Interfejs wiersza poleceÅ„ uÅ‚atwia skalowanie
    procesÃ³w rozwoju oprogramowania, szczegÃ³lnie istotne w przypadku duÅ¼ych
    projektÃ³w. Åatwo umoÅ¼liwia wykonywanie zadaÅ„, takich jak rÃ³wnoczesne
    uruchamianie wielu serwerÃ³w.
  </M>
  <M>
    WÅ‚asne, wewnÄ™trzne interfejsy wiersza poleceÅ„ tworzÄ… warstwÄ™ abstrakcji
    ponad zewnÄ™trznymi technologiami, procesami firmy i zespoÅ‚em. To zmniejsza
    zaleÅ¼noÅ›ci, uÅ‚atwia wdroÅ¼enie nowych programistÃ³w, standaryzuje procesy
    zespoÅ‚owe i umoÅ¼liwia automatyzacjÄ™.
  </M>
</Section>

<Section>
  <XL>Zrozumienie konceptu "executors" w NX</XL>
  <M>
    Rozszerzenie <B>NRWL (NX)</B> umoÅ¼liwia tworzenie monorepo dla projektÃ³w w
    jÄ™zyku <B>JavaScript</B>, integrujÄ…c rÃ³Å¼norodne technologie za pomocÄ…
    wtyczek. Warto zauwaÅ¼yÄ‡, Å¼e rozszerzenie uÅ‚atwia tworzenie niestandardowych
    wtyczek, umoÅ¼liwiajÄ…c generowanie kodu oraz wykonywanie dziaÅ‚aÅ„ (budowanie,
    testowanie, formatowanie itp.). Te zadania dziaÅ‚ajÄ… w Å›rodowisku{" "}
    <B>Node.js</B>, przypominajÄ…c funkcje projektu. MogÄ… byÄ‡ uruchamiane zarÃ³wno
    z <B>konsoli NX</B>, jak i z terminala, efektywnie tworzÄ…c interfejs wiersza
    poleceÅ„ w ramach projektu.
  </M>
  <M>
    Zacznijmy od zainstalowania dedykowanej paczki{" "}
    <B>@nrwl/nx-plugin@latestpet</B>. NastÄ™pnie musimy wygenerowaÄ‡ kod naszej
    wÅ‚asnej wtyczki za pomocÄ… poniÅ¼szego polecenia:{" "}
    <B>nx g @nrwl/nx-plugin:plugin [nazwa-mojej-wtyczki]</B>.
  </M>
  <M>
    Teraz zajmijmy siÄ™ konceptem <B>Task Executors</B>. Aby wykonaÄ‡ polecenia w
    terminalu, uÅ¼yj <B>nx run [projekt] [polecenie]</B> lub{" "}
    <B>nx [polecenie] [projekt]</B>. Tutaj <B>projekt</B> odnosi siÄ™ do projektu
    w <B>monorepo</B>, a <B>polecenie</B> oznacza zadanie <B>NodeJS</B>, ktÃ³re
    ma zostaÄ‡ uruchomione.
  </M>
  <M>
    Ponadto, dla Å›rodowisk <B>produkcji</B> lub <B>testowego</B>, dostosuj
    konfiguracje: <B>nx [polecenie] [projekt] --configuration=[konfiguracja]</B>
    .
  </M>
  <M>
    Co wiÄ™cej, dodatkowe parametry sÄ… dostosowalne:{" "}
    <B>
      nx [polecenie] [projekt]
      --[mÃ³jParametrNiestandardowy]=[wartoÅ›Ä‡MojegoParametruNiestandardowego]
    </B>
    .
  </M>
</Section>

<Section>
  <XL>Tworzenie wÅ‚asnego "executora" w NX</XL>
  <M>
    Aby zaimplementowaÄ‡ okreÅ›lone polecenie, uÅ¼yj:{" "}
    <B>nx generate @nrwl/nx-plugin:executor [check] --project=[moja-wtyczka]</B>.
    Tutaj <B>[moja-wtyczka]</B> reprezentuje wczeÅ›niej utworzonÄ… wtyczkÄ™, a <B>
      [check]
    </B> oznacza nazwÄ™ zadania.
  </M>
  <M>
    Po wykonaniu polecenia, repozytorium powinno prezentowaÄ‡ nastÄ™pujÄ…cÄ…
    strukturÄ™ folderÃ³w/plikÃ³w:
  </M>
  <Image
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/1.jpg"
    description="Struktura folderÃ³w/plikÃ³w"
  />
  <M>
    Centralny plik konfiguracyjny, <B>schema.json</B>, peÅ‚ni rolÄ™ gÅ‚Ã³wnego
    pliku, zawierajÄ…cego istotne metadane dla twojego "executora". Obejmuje to
    opisy parametrÃ³w dedykowanego zadania, ktÃ³re mogÄ… byÄ‡ opcjonalne, z opcjami
    wyboru wielu lub konkretnych wartoÅ›ci.
  </M>
  <Code
    mode="dynamic"
    lang="json"
    description="Plik schema.json"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/1.json"
    linesCount={10}
  />
  <M>
    Fundamentalna logika znajduje siÄ™ w pliku <B>executor.ts</B>.
  </M>
  <Code
    mode="dynamic"
    lang="ts"
    description="Plik executor.ts"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/2.ts"
    linesCount={15}
  />
  <M>
    W implementacji, eksportujemy funkcjÄ™ zwracajÄ…cÄ… <B>obiekt</B> z flagÄ…{" "}
    <B>success</B>, oznaczajÄ…cÄ… status ukoÅ„czenia. Funkcja przyjmuje opcje
    przekazane przez <B>CLI</B> jako pierwszy argument oraz{" "}
    <B>kontekst wykonania</B> (wskazujÄ…cy na uruchomiony projekt) jako drugi
    parametr.
  </M>
  <M>
    Ostatnim krokiem jest przypisanie zadania do konkretnego projektu, co moÅ¼na
    osiÄ…gnÄ…Ä‡ w pliku <B>project.json</B> w sekcji <B>target</B>.
  </M>
  <Code
    mode="dynamic"
    lang="json"
    description="Ostatnia konfiguracja"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/3.json"
    linesCount={20}
  />
  <M>
    Wykonaj zadanie, uÅ¼ywajÄ…c polecenia <B>nx run [mÃ³j-projekt]:[check]</B>.
  </M>
</Section>

<Section>
  <XL>Zrozumienie generatorÃ³w kodu</XL>
  <M>
    Generatory oferujÄ… uproszczone podejÅ›cie do automatyzacji wielu zadaÅ„
    integralnych dla twojej pracy. Czy to dotyczy tworzenia szablonÃ³w dla
    komponentÃ³w i funkcji, zapewniania precyzyjnego generowania i organizowania
    bibliotek, czy aktualizowania plikÃ³w konfiguracyjnych, generatory odgrywajÄ…
    kluczowÄ… rolÄ™ w standaryzacji tych procesÃ³w przy pomocy niezawodnej i
    spÃ³jnej metodologii.
  </M>
  <M> IstniejÄ… trzy gÅ‚Ã³wne rodzaje generatorÃ³w:</M>
  <M>
    <B>ğŸ›« Generatory rozszerzajÄ…ce kod projektu podczas instalacji wtyczki</B>
  </M>
  <M>
    Takie generatory sÄ… wywoÅ‚ywane podczas wykonywania polecenia:{" "}
    <B>npm i [wtyczka]</B>.
  </M>
  <M>
    <B>ğŸ› ï¸ Generatory lokalne</B>
  </M>
  <M>
    Generatory tworzÄ…ce szablony dla komponentÃ³w, usÅ‚ug, funkcji, itp... MajÄ…
    nastÄ™pujÄ…cy schemat wywoÅ‚ania:{" "}
    <B>nx generate [wtyczka]:[nazwa-generatora] [opcje]</B>.
  </M>
  <M>
    <B>ğŸš€ Generatory aktualizacji</B>
  </M>
  <M>
    WywoÅ‚ywane przez <B>NX</B> podczas ich aktualizacji w celu utrzymania plikÃ³w
    konfiguracyjnych zsynchronizowanych z najnowszymi wersjami narzÄ™dzi. Ten
    generator jest wywoÅ‚ywany podczas wykonywania polecenia:{" "}
    <B>nx migrate [wtyczka]</B>.
  </M>
</Section>

<Section>
  <XL>Tworzenie wÅ‚asnego generatora NX</XL>
  <M>
    Aby utworzyÄ‡ wÅ‚asny generator, wykonaj nastÄ™pujÄ…ce polecenie:{" "}
    <B>
      nx generate @nrwl/nx-plugin:generator [moj-generator]
      --project=[moja-wtyczka]
    </B>
    , gdzie <B>[moja-wtyczka]</B> to nazwa wczeÅ›niej utworzonej wtyczki, a <B>
      [moj-generator]
    </B> to nazwa generatora.
  </M>
  <M>Generator utworzy strukturÄ™ projektu w pliku jak poniÅ¼ej:</M>
  <Image
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/2.jpg"
    description="Struktura folderÃ³w/plikÃ³w"
  />
  <M>
    Plik <B>generator.ts</B> zawiera caÅ‚Ä… logikÄ™ generatora. Zawiera funkcjÄ™
    wywoÅ‚ywanÄ… do manipulacji drzewem systemu plikÃ³w. Plik <B>schema.json</B>{" "}
    zawiera opis generatora, dostÄ™pne opcje, informacje walidacyjne i domyÅ›lne
    wartoÅ›ci (podobnie jak w przypadku "executora").
  </M>
  <Code
    mode="dynamic"
    lang="tsx"
    description="Plik generator.ts"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/4.ts"
    linesCount={10}
  />
  <M>
    Parametr <B>tree</B> reprezentuje strukturÄ™ plikÃ³w i umoÅ¼liwia usuwanie,
    dodawanie i edytowanie plikÃ³w. <B>Devkit</B> dostarcza rÃ³Å¼ne narzÄ™dzia
    uÅ‚atwiajÄ…ce pracÄ™ z plikami. Na przykÅ‚ad w powyÅ¼szym przykÅ‚adzie funkcja{" "}
    <B>installPackageTask</B> instaluje pakiety <B>Node</B>. Dodatkowo, w ramach
    naszego niestandardowego generatora, moÅ¼emy korzystaÄ‡ z innych generatorÃ³w.
    Funkcja <B>libraryGenerator</B>, na przykÅ‚ad, tworzy bibliotekÄ™ na podstawie
    innego generatora.
  </M>
  <Code
    mode="dynamic"
    lang="json"
    description="Plik schema.json"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/5.json"
    linesCount={16}
  />
  <M>
    Obiekt <B>$default</B> sÅ‚uÅ¼y do odczytu argumentÃ³w wiersza polecenia
    przekazywanych do generatora. Aby uruchomiÄ‡ stworzony w ten sposÃ³b
    generator, uÅ¼yj wiersza polecenia w nastÄ™pujÄ…cy sposÃ³b:{" "}
    <B>nx generate @myorg/[moja-wtyczka]:[moj-generator] [mojalib]</B>.
  </M>
</Section>

<Section>
  <XL>Dodawanie pakietÃ³w na npm</XL>
  <M>
    W ramach rozszerzenia <B>NRWL</B>, moÅ¼emy rÃ³wnieÅ¼ utworzyÄ‡ pakiet <B>NPM</B>
    , ktÃ³ry peÅ‚ni rolÄ™ interfejsu wiersza poleceÅ„ z funkcjonalnoÅ›ciami
    niezaleÅ¼nymi od konkretnego projektu. Taki interfejs wiersza poleceÅ„ moÅ¼e
    zapewniÄ‡ standaryzacjÄ™ w zespole lub nawet w caÅ‚ej organizacji, obejmujÄ…c:
  </M>
  <L>
    <Li>
      â›´ï¸ konfiguracjÄ™ Å›rodowiska pracy, instalacjÄ™ odpowiednich wersji narzÄ™dzi,
      zgodnych z tymi uÅ¼ywanymi przez innych programistÃ³w,
    </Li>
    <Li>
      ğŸ›¸ tworzenie projektÃ³w zgodnie z ustalonym schematem stosowanym w
      projekcie.
    </Li>
  </L>
</Section>

<Section>
  <XL>Jak stworzyÄ‡ wÅ‚asny pakiet NPM?</XL>
  <M>
    Aby utworzyÄ‡ bibliotekÄ™ w jÄ™zyku <B>JavaScript</B>, uÅ¼yj polecenia:{" "}
    <B>nx generate @nrwl/workspace:library [moje-cli] --buildable</B>.
  </M>
  <M>
    Aby uÅ‚atwiÄ‡ przekazywanie argumentÃ³w do konsoli, moÅ¼emy uÅ¼yÄ‡ dodatkowego
    pakietu NPM o nazwie <B>yargs</B>. Zainstaluj to narzÄ™dzie poleceniem:{" "}
    <B>npm install yargs</B>.
  </M>
  <M>
    W folderze biblioteki utwÃ³rz katalog <B>bin</B>, a w nim plik o nazwie{" "}
    <B>moje-cli.js</B> o nastÄ™pujÄ…cej zawartoÅ›ci:
  </M>
  <Code
    mode="dynamic"
    lang="jsx"
    description="Plik moje-cli.js"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/6.js"
    linesCount={2}
  />
  <M>
    Pozwala to odwoÅ‚ywaÄ‡ siÄ™ do ÅºrÃ³dÅ‚a interfejsu wiersza poleceÅ„, ktÃ³re bÄ™dzie
    znajdowaÄ‡ siÄ™ pod Å›cieÅ¼kÄ… <B>src/lib/cli.js</B>. ZawartoÅ›Ä‡ moÅ¼e wyglÄ…daÄ‡
    tak:
  </M>
  <Code
    mode="dynamic"
    lang="tsx"
    description="Plik w Å›cieÅ¼ce 'src/lib/cli.js'"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/7.js"
    linesCount={17}
  />
  <M>
    Ta konfiguracja zapewnia nam polecenie <B>init</B>, z parametrem nazwy{" "}
    <B>(alias n)</B>, wywoÅ‚ujÄ…ce funkcjÄ™ <B>workspaceInit</B>, ktÃ³ra moÅ¼e
    zawieraÄ‡ logikÄ™ tworzenia projektu. Na przykÅ‚ad, inicjalizujÄ…c{" "}
    <B>workspace NX</B>.
  </M>
  <M>
    Przed opublikowaniem biblioteki w rejestrze <B>NPM</B>, wystarczy
    odpowiednio jÄ… skonfigurowaÄ‡.
  </M>
  <Code
    mode="dynamic"
    lang="json"
    description="Plik package.json"
    src="https://raw.githubusercontent.com/polubis/Snippets-for-articles-and-lessons/main/NRWL%20extension%20and%20why%20do%20we%20need%20our%20own%20cli%20in%20JavaScript/8.json"
    linesCount={14}
  />
  <M>
    Ta konfiguracja pozwala, po opublikowaniu i zainstalowaniu globalnie pakietu
    NPM, uÅ¼ywaÄ‡ niestandardowego interfejsu wiersza poleceÅ„ poprzez wykonanie
    nastÄ™pujÄ…cego polecenia w wierszu poleceÅ„:{" "}
    <B>moje-cli init --name=[nowy-projekt]</B>.
  </M>
</Section>

<Section>
  <XL>Dodatkowe spojrzenie architekta!</XL>
  <M>JeÅ›li spodobaÅ‚ ci siÄ™ ten artykuÅ‚, Å›miaÅ‚o eksploruj powiÄ…zane tematy:</M>
  <M>
    <A href="/articles/thoughts/dream-stack-for-react-dev/" outside>
      ğŸŒŸ Dream Stack for React Dev
    </A>
  </M>
  <M>
    <A href="/articles/tooling/deep-dive-into-nx-features/" outside>
      ğŸ¥‡ Overview of the Key Features in NX Tool
    </A>
  </M>
  <M>
    <A
      href="/articles/architecture/modular-architecture-for-medium-frontend-apps/"
      outside
    >
      â­ Modular Architecture for Medium Frontend Apps
    </A>
  </M>
</Section>

<Summary label="Podsumowanie">
  <M>
    Niestandardowe <B>interfejsy wiersza poleceÅ„ (CLIs)</B> oferujÄ… obszerne
    moÅ¼liwoÅ›ci standaryzacji i automatyzacji w przepÅ‚ywach pracy projektowych.
    NarzÄ™dzie monorepo <B>NRWL Extension</B> rozszerza te moÅ¼liwoÅ›ci,
    umoÅ¼liwiajÄ…c tworzenie i rozwijanie interfejsÃ³w wiersza poleceÅ„ od projektu
    po caÅ‚Ä… organizacjÄ™. Niniejszy artykuÅ‚ zagÅ‚Ä™bia siÄ™ w podstawy tworzenia i
    wykorzystywania interfejsÃ³w wiersza poleceÅ„.
  </M>
</Summary>
